[build-system]
build-backend = "poetry.masonry.api"
requires = ["poetry>=1.0.0"]

[tool.poetry]
authors = ["Andreas Hofer <andreas.hofer@amitronics.de>"]
description = "API for projecthours application"
name = "app"
version = "0.0.1"

[tool.poetry.dependencies]
python = "^3.8"
pandas = "^1.4.0"
Authlib = "^0.15.5"
pydantic = {extras = ["email"], version = "^1.9.0"}
fastapi = "^0.73.0"
SQLAlchemy = "^1.4.31"
alembic = "^1.7.5"
passlib = {extras = ["bcrypt"], version = "^1.7.2"}
python-jose = {extras = ["cryptography"], version = "^3.3.0"}
httpx = "^0.22.0"
uvicorn = "^0.17.1"
tenacity = "^8.0.1"
psycopg2-binary = "^2.9.3"
wheel = "^0.37.1"
python-dotenv = "^0.19.2"
itsdangerous = "^2.0.1"
PyJWT = "^2.3.0"
gunicorn = "^20.1.0"
openpyxl = "^3.0.9"

[tool.poetry.dev-dependencies]
black = "^20.8b1"
pylint = "^2.8.0"
mypy = "^0.790"
pytest = "^6.2.1"
pre-commit = "^2.10.1"
ipython = "^7.23.0"
requests = "^2.26.0"
xlrd = "^2.0.1"
openpyxl = "^3.0.9"
bump2version = "^1.0.1"
snakeviz = "^2.1.0"

[tool.pytest.ini_options]
addopts = "-sv"
markers = [
    "functional: mark as functional test.",
    "integration: mark as integration test.",
    "unit: mark as unit test.",
]
python_classes = "Test*"
python_files = [
    "__init__.py",
    "test_*.py",
]
python_functions = ["test_*"]
testpaths = ["tests"]

[tool.black]
line-length = 119
target_version = ['py38']
include = '\.pyi?$'
exclude = '''
(
  /(
      \.eggs         # exclude a few common directories in the
    | \.git          # root of the project
    | \.hg
    | \.mypy_cache
    | \.tox
    | \.venv
    | build
    | dist
  )/
)
'''

[tool.isort]
multi_line_output = 3
include_trailing_comma = true
use_parentheses = true
ensure_newline_before_comments = true

[tool.pylint]
    [tool.pylint.master]
    jobs = 0
    load-plugins = [
        'pylint.extensions.broad_try_clause',
        'pylint.extensions.emptystring',
        'pylint.extensions.comparetozero',
        'pylint.extensions.bad_builtin',
        'pylint.extensions.mccabe',
        'pylint.extensions.docstyle',
        'pylint.extensions.check_elif',
        'pylint.extensions.redefined_variable_type',
        'pylint.extensions.overlapping_exceptions',
        'pylint.extensions.docparams',
    ]
    max-line-length = 119
    persistent = 'no'

    [tool.pylint.messages_control]
    enable = [
        'F',  # Fatal
        'E',  # Error
        'W',  # Warning
        'R',  # Refactor
        'C',  # Convention
        'I',  # Informational
    ]
    disable= [
        'fixme',
        'bad-continuation',  # TODO: this check is removed in pylint 2.6
        'no-absolute-import',
        'spelling',
        'suppressed-message',
        'missing-class-docstring',
        'too-few-public-methods',
        'locally-disabled',
    ]

    [tool.pylint.reports]
    msg-template = '{path}:{line}: [{msg_id}({symbol}), {obj}] {msg}'
    output-format = 'colorized'
    score = 'no'

    [tool.pylint.format]
    single-line-if-stmt = 'yes'

[tool.pylic]
safe_licenses = [
    "Apache Software License",
    "Apache License 2.0",
    "MIT License",
    "Python Software Foundation License",
    "Mozilla Public License 2.0 (MPL 2.0)",
    "Public Domain", 
    "BSD License", # der Copyright-Vermerk des ursprünglichen Programms darf nicht entfernt werden
    "BSD 3-Clause", # verbietet, für abgeleitete Werke mit dem Namen der Lizenz oder ihrer Autoren zu werben. 
]
unsafe_packages = [
    "unlicensedPackage",
]
